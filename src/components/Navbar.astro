---
import ThemeToggle from './ThemeToggle.astro';

interface Props {
	logo?: string;
	links?: Array<{ label: string; href: string }>;
}

const { logo = 'Portfolio', links = [
	{ label: 'Home', href: '#home' },
	{ label: 'About', href: '#about' },
	{ label: 'Skills', href: '#skills' },
	{ label: 'Projects', href: '#projects' },
	{ label: 'Contact', href: '#contact' },
] } = Astro.props;
---

<!-- Desktop navbar -->
<nav class="navbar fixed top-0 left-0 right-0 z-[2000] bg-[rgba(250,250,250,0.35)] dark:bg-[rgba(15,23,42,0.35)] backdrop-blur-[20px] border-b transition-all duration-200 hidden lg:block">
	<div class="w-full px-12 py-6 lg:px-8 xl:px-12 flex justify-between items-center">
		<a href="#home" class="nav-logo font-serif text-xl font-normal no-underline transition-colors duration-200 tracking-wide">{logo}</a>
		<div class="flex items-center gap-4">
			<ul class="flex list-none gap-8 m-0 p-0">
				{links.map((link) => (
					<li><a href={link.href} class="nav-link no-underline font-light text-[0.95rem] transition-colors duration-200 relative tracking-wide">{link.label}</a></li>
				))}
			</ul>
			<ThemeToggle />
		</div>
	</div>
</nav>

<!-- Mobile menu with Alpine.js - horizontal expansion -->
<div x-data="{ open: false }" class="lg:hidden fixed bottom-6 right-6 z-[2000]">
	<!-- Container that expands horizontally -->
	<div 
		class="flex items-center justify-end h-14 rounded-full bg-[rgba(250,250,250,0.2)] dark:bg-[rgba(15,23,42,0.2)] backdrop-blur-[20px] border border-white/10 dark:border-white/5 shadow-lg transition-all duration-300 ease-out overflow-hidden"
		:class="open ? 'w-auto pl-4 pr-1' : 'w-14'"
	>
		<!-- Menu items - shown when open -->
		<div 
			x-show="open"
			x-transition:enter="transition ease-out duration-300"
			x-transition:enter-start="opacity-0 -translate-x-4"
			x-transition:enter-end="opacity-100 translate-x-0"
			x-transition:leave="transition ease-in duration-200"
			x-transition:leave-start="opacity-100 translate-x-0"
			x-transition:leave-end="opacity-0 -translate-x-4"
			class="flex items-center gap-4 pr-2"
		>
			{links.map((link) => (
				<a 
					href={link.href} 
					@click="open = false"
					class="mobile-nav-link whitespace-nowrap no-underline font-light text-sm transition-colors duration-200"
				>
					{link.label}
				</a>
			))}
			<div class="border-l border-white/10 dark:border-white/5 pl-3 ml-1">
				<ThemeToggle />
			</div>
		</div>

		<!-- Toggle button -->
		<button 
			type="button" 
			@click="open = !open"
			@click.outside="open = false"
			:aria-expanded="open"
			class="w-14 h-14 flex-shrink-0 rounded-full cursor-pointer flex items-center justify-center transition-all duration-200 hover:bg-white/10 dark:hover:bg-white/5" 
			aria-label="Toggle menu"
		>
			<!-- Hamburger icon -->
			<svg 
				x-show="!open" 
				x-transition:enter="transition ease-out duration-200"
				x-transition:enter-start="opacity-0 rotate-90"
				x-transition:enter-end="opacity-100 rotate-0"
				x-transition:leave="transition ease-in duration-150"
				x-transition:leave-start="opacity-100 rotate-0"
				x-transition:leave-end="opacity-0 rotate-90"
				class="w-6 h-6 absolute" 
				viewBox="0 0 24 24" 
				fill="none" 
				stroke="currentColor" 
				stroke-width="2"
			>
				<line x1="3" y1="6" x2="21" y2="6"></line>
				<line x1="3" y1="12" x2="21" y2="12"></line>
				<line x1="3" y1="18" x2="21" y2="18"></line>
			</svg>
			<!-- Close icon -->
			<svg 
				x-show="open" 
				x-transition:enter="transition ease-out duration-200"
				x-transition:enter-start="opacity-0 rotate-90"
				x-transition:enter-end="opacity-100 rotate-0"
				x-transition:leave="transition ease-in duration-150"
				x-transition:leave-start="opacity-100 rotate-0"
				x-transition:leave-end="opacity-0 rotate-90"
				class="w-6 h-6 absolute" 
				viewBox="0 0 24 24" 
				fill="none" 
				stroke="currentColor" 
				stroke-width="2"
			>
				<line x1="18" y1="6" x2="6" y2="18"></line>
				<line x1="6" y1="6" x2="18" y2="18"></line>
			</svg>
		</button>
	</div>
</div>

<style>
	.navbar {
		border-color: var(--border-color);
	}

	.nav-logo {
		color: var(--text-primary);
	}

	.nav-logo:hover {
		color: var(--accent-primary);
	}

	.nav-link {
		color: var(--text-secondary);
	}

	/* Nav link underline animation */
	.nav-link::after {
		content: '';
		position: absolute;
		bottom: -4px;
		left: 0;
		width: 0;
		height: 1px;
		background: var(--accent-primary);
		transition: width 0.2s ease;
	}

	.nav-link:hover {
		color: var(--accent-primary);
	}

	.nav-link:hover::after {
		width: 100%;
	}

	/* Mobile menu button icons */
	[x-data] button svg {
		color: var(--text-primary);
	}

	.mobile-nav-link {
		color: var(--text-secondary);
	}

	.mobile-nav-link:hover {
		color: var(--text-primary);
	}
</style>
